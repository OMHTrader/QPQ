<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Investor ↔ Company Map</title>

  <!-- Leaflet (no SRI so it won’t be blocked) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root{ --bg:#0f172a; --panel:#111827cc; --text:#e5e7eb; --accent:#60a5fa;
           --blue:#3b82f6; --red:#ef4444; --link:#f59e0b; }
    html,body{height:100%;margin:0}
    body{
      background:var(--bg); color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial;
      font-size:20px; line-height:1.45;
    }
    #map{height:100vh;width:100%}

    .banner{position:fixed;left:12px;top:12px;z-index:1100;
      background:#b91c1ccc;color:white;border:1px solid #7f1d1d;border-radius:10px;
      padding:8px 12px;display:none;max-width:60ch}
    .ok{background:#065f4677;border-color:#065f46;display:none}

    .control-panel{ position:fixed; z-index:1000; top:16px; right:12px;
      background:var(--panel); backdrop-filter:blur(6px);
      border:1px solid #1f2937; border-radius:16px; padding:12px 14px; min-width:360px;
      box-shadow:0 8px 24px rgba(0,0,0,.35); }
    .control-panel h2{font-size:1rem; margin:0 0 8px; font-weight:700}
    .row{display:flex; align-items:center; gap:10px; margin:8px 0}
    .row button,.row select{ padding:8px 12px; border-radius:10px; border:1px solid #374151;
      background:#0b1220; color:var(--text); font-size:.95rem; cursor:pointer; }
    .row label{font-size:.95rem; opacity:.9}
    .footnote{font-size:.85rem; opacity:.75; margin-top:8px}
    .legend{ position:fixed; z-index:1000; bottom:12px; left:12px;
      background:var(--panel); border:1px solid #1f2937; border-radius:12px; padding:10px 12px; font-size:.95rem; }
    .legend .swatch{display:inline-block; width:12px; height:12px; border-radius:50%; margin-right:6px}
    .legend .item{margin-right:12px; white-space:nowrap}
    .leaflet-container{background:#0b1020}
    .leaflet-control-attribution{background:rgba(17,24,39,.6); color:#cbd5e1; font-size:.8rem}
    .leaflet-popup-content{color:#0b1220; font-size:.95rem}
    a{color:var(--accent)}
    .svg-icon{filter:drop-shadow(0 2px 4px rgba(0,0,0,.6))}
    code.inline{background:#0b1220;padding:2px 6px;border-radius:6px;border:1px solid #374151}
  </style>
</head>
<body>
  <div id="err" class="banner"></div>
  <div id="ok" class="banner ok"></div>

  <div class="control-panel" id="controls">
    <h2>Company Focus</h2>
    <div class="row">
      <button id="prevBtn" title="Previous company">◀</button>
      <select id="companySelect" aria-label="Select company"></select>
      <button id="nextBtn" title="Next company">▶</button>
    </div>
    <div class="row">
      <label><input type="checkbox" id="showAllLinks" /> Show all arcs</label>
    </div>
    <div id="stats" style="font-size:.9rem;opacity:.9"></div>
    <div id="companyMeta" style="font-size:.95rem; line-height:1.5; opacity:.95;"></div>
    <div class="footnote">Data: <code class="inline">const DATA = { ... }</code> (embedded below)</div>
  </div>

  <div class="legend">
    <span class="item"><span class="swatch" style="background:var(--blue)"></span>Company</span>
    <span class="item"><span class="swatch" style="background:var(--red)"></span>Investor</span>
    <span class="item">▲ Mar-a-Lago</span>
    <span class="item">★ White House</span>
  </div>

  <div id="map"></div>

  <script>
  // ---------- Inline data with baked-in coordinates (edit this) ----------
  const DATA = {
    companies: [
      { id:"NG", ticker:"NG", name:"NOVAGOLD RESOURCES INC.", desc:"A goldmine in Alaska", address:"Crooked Creek, AK", lat:61.5930, lng:-158.1160, qpq:"Investors are likely going to use Trump to get federal funds to build the mine, relax federal restrictions on building the mine, and/or use the potential of the mine as a pump and dump." },
      { id:"RDW", ticker:"RDW", name:"REDWIRE CORPORATION", desc:"Defense Contractor", address:"Jacksonville, FL", lat:30.2055, lng:-81.5829, qpq:"Investors are likely looking to get defense contracts around the Golden Dome." },
      { id:"QXO", ticker:"QXO", name:"QXO, INC.", desc:"Construction Companies", address:"Miami, FL", lat:25.7617, lng:-80.1918, qpq:"QXO is an investment vehicle with money coming in from foreign companies." },
      { id:"BKKT", ticker:"BKKT", name:"BKKT", desc:"Crypto Treasury", address:"Alpharetta, GA", lat:34.0754, lng:-84.2941, qpq:"Bakkt is looking to expand as a crypto treasurer listing on multiple exchanges in foreign countries. Likely to see little regulation." },
      { id:"WOLF", ticker:"WOLF", name:"Wolfspeed", desc:"Semiconductor", address:"Durham, NC", lat:35.9940, lng:-78.8986, qpq:"An American only semiconductor manufacturer. Strong potential for US Gov Investment like INTC." },
      { id:"ALTS", ticker:"ALTS", name:"ALTS", desc:"Crypto Treasury (WLFI)", address:"Miami Beach, FL", lat:25.7907, lng:-80.1300, qpq:"The Company buys WLFI, one of Trump's crypto currencies with money from issuing stock." },
      { id:"PSQH", ticker:"PSQH", name:"PSQ Holdings (PublicSquare)", desc:"Conservative Marketplace", address:"West Palm Beach, FL", lat:26.7153, lng:-80.0534, qpq:"Could see favorable promotions." },
      { id:"PLTR", ticker:"PLTR", name:"Palantir Technologies", desc:"Defense Contractor", address:"Denver, CO", lat:39.7392, lng:-104.9903, qpq:"Provides major data analytics and defense contracting for the Trump administration in both terms." },
      { id:"TSLA", ticker:"TSLA", name:"Tesla, Inc.", desc:"Car Company", address:"Austin, TX", lat:30.2672, lng:-97.7431, qpq:"Provides major data analytics and defense contracting for Trump's presidency." },
      { id:"META", ticker:"META", name:"Meta Platforms", desc:"Media", address:"Menlo Park, CA", lat:37.4549, lng:-122.1817, qpq:"Provides major data analytics and message outreach for the Trump campaign" },
      { id:"ROIV", ticker:"ROIV", name:"Roivant Sciences", desc:"Healthcare", address:"New York, NY", lat:40.7580, lng:-73.9855, qpq:"Could see special treatment by the FDA" },
      { id:"IMVT", ticker:"IMVT", name:"Immunovant, Inc.", desc:"Healthcare", address:"New York, NY", lat:40.7549, lng:-73.9840, qpq:"Could see special treatment by the FDA" },
      { id:"BZFD", ticker:"BZFD", name:"BuzzFeed, Inc.", desc:"Media", address:"New York, NY", lat:40.7400, lng:-74.0020, qpq:"Could see special treatment by the FTC" },
      { id:"RUM", ticker:"RUM", name:"Rumble Inc.", desc:"Hosts Truth Social", address:"Sarasota, FL", lat:27.3364, lng:-82.5307, qpq:"Could see special treatment by the FTC, gov" },
      { id:"DJT_DWAC", ticker:"DJT/DWAC", name:"Trump Media / DWAC", desc:"Crypto Treasurer", address:"Sarasota, FL", lat:27.3364, lng:-82.5307, qpq:"Could see the crypto strategic reserve initiative." },
      { id:"UMAC", ticker:"UMAC", name:"Unusual Machines, Inc.", desc:"Drones", address:"San Juan, PR", lat:18.4655, lng:-66.1057, qpq:"An American Drone manufacturer possibly set to receive government contracts." },
      { id:"HOND", ticker:"HOND", name:"HCM II Acquisition (Energy)", desc:"Energy", address:"Houston, TX", lat:29.7604, lng:-95.3698, qpq:"Recently received approval by the Energy Department as a qualified reactor company." },
      { id:"CEPO_BSTR", ticker:"CEPO/BSTR", name:"CEPO / BSTR", desc:"Crypto treasurer", address:"New York, NY", lat:40.7128, lng:-74.0060, qpq:"Could see crypto strategic reserve." },
      { id:"ABTC", ticker:"ABTC", name:"American Blockchain Corp.", desc:"Crypto Miner", address:"Las Vegas, NV", lat:36.1699, lng:-115.1398, qpq:"A miner for the strategic reserve." },
      { id:"PHM", ticker:"PHM", name:"PulteGroup, Inc.", desc:"Housing Developer", address:"Atlanta, GA", lat:33.8486, lng:-84.3733, qpq:"Could see beneficial housing regulations." }
    ],
    investors: [
      { id:"GHISALLO", name:"Ghisallo Capital Management LLC", address:"Austin, TX", notes:"Trump's Secretary of Treasury Scott Bessent seeded this hedge fund.", lat:30.2672, lng:-97.7431 },
      { id:"BALYASNY", name:"Balyasny Asset Management L.P.", address:"Chicago, IL", notes:"Owns several companies with links to Trump and allies.", lat:41.8781, lng:-87.6298 },
      { id:"PAULSON", name:"PAULSON & CO. INC.", address:"New York, NY", notes:"Economic advisor to Trump during first term.", lat:40.7580, lng:-73.9855 },
      { id:"AEI", name:"AE Industrial Partners", address:"Boca Raton, FL", notes:"Owner AEI has very close proximity to Mar-a-Lago.", lat:26.3587, lng:-80.0831 },
      { id:"HUDSONBAY", name:"Hudson Bay Capital Management LP", address:"Greenwich, CT", notes:"Owner Sander Gerber is on Donald Trump's intelligence advisory board.", lat:41.0330, lng:-73.6290 },
      { id:"HOODRIVER", name:"Hood River Capital Management LLC", address:"Portland, OR", notes:"Owns several companies with links to Trump and allies.", lat:45.5152, lng:-122.6784 },
      { id:"PETER_CANNITO", name:"Peter Cannito", address:"Jacksonville, FL", notes:"CEO of RDW; praised the Trump administration re: Golden Dome.", lat:30.2055, lng:-81.5829 },
      { id:"CANTOR", name:"CANTOR FITZGERALD, L. P.", address:"New York, NY", notes:"Howard Lutnick-led firm; described as having close administration ties.", lat:40.7589, lng:-73.9712 },
      { id:"AFFINITY", name:"Affinity Partners GP LP", address:"Miami, FL", notes:"Jared Kushner is the managing partner and sits on the board (user-provided).", lat:25.7617, lng:-80.1918 },
      { id:"ICE", name:"Intercontinental Exchange (ICE)", address:"Atlanta, GA", notes:"Kelly Loeffler co-founded Bakkt with ICE CEO.", lat:33.7490, lng:-84.3880 },
      { id:"CITADEL", name:"Citadel Advisors LLC", address:"Miami, FL", notes:"Ken Griffin is a major Trump supporter (user-provided).", lat:25.7617, lng:-80.1918 },
      { id:"KELLY_LOEFFLER", name:"Kelly Loeffler", address:"Atlanta, GA", notes:"Founder/ex-CEO of Bakkt; SBA Director (user-provided).", lat:33.7485, lng:-84.3915 },
      { id:"JANE_STREET", name:"JANE STREET GROUP, LLC", address:"New York, NY", notes:"Largest 13F filer for DJT (user-provided).", lat:40.7061, lng:-74.0092 },
      { id:"ZACH_WITIKOFF", name:"Zach Witikoff", address:"Miami Beach, FL", notes:"Board member; son of Steve Witkoff (user-provided).", lat:25.7907, lng:-80.1300 },
      { id:"DONALD_TRUMP_JR", name:"Donald Trump Jr.", address:"Palm Beach, FL", notes:"Trump's son.", lat:26.7153, lng:-80.0534 },
      { id:"PETER_THIEL", name:"Peter Thiel", address:"Miami, FL", notes:"Major Trump supporter (user-provided).", lat:25.7617, lng:-80.1918 },
      { id:"ELON_MUSK", name:"Elon Musk", address:"Austin, TX", notes:"Major Trump supporter (user-provided).", lat:30.2672, lng:-97.7431 },
      { id:"MARK_ZUCKERBERG", name:"Mark Zuckerberg", address:"Menlo Park, CA", notes:"Major Trump supporter (user-provided).", lat:37.4521, lng:-122.1819 },
      { id:"VIVEK_RAMASWAMY", name:"Vivek Ramaswamy", address:"Columbus, OH", notes:"Major Trump supporter.", lat:39.9612, lng:-82.9988 },
      { id:"ALPINE_GLOBAL", name:"Alpine Global Management, LLC", address:"New York, NY", notes:"Owns several companies with links to Trump and allies.", lat:40.7550, lng:-73.9867 },
      { id:"TETHER", name:"Tether", address:"Road Town, BVI", notes:"Large crypto firm backing Trump endeavors (user-provided).", lat:18.4286, lng:-64.6185 },
      { id:"MYDA_ADVISORS", name:"MYDA Advisors", address:"New York, NY", notes:"Owns several Trump-linked companies (user-provided).", lat:40.7484, lng:-73.9857 },
      { id:"ANSON_FUNDS", name:"Anson Funds Management LP", address:"Toronto, ON", notes:"Owns several companies with links to Trump and allies.", lat:43.6532, lng:-79.3832 },
      { id:"AROSA_CAPITAL", name:"Arosa Capital Management LP", address:"New York, NY", notes:"Owns several companies with links to Trump and allies.", lat:40.7590, lng:-73.9851 },
      { id:"ERIC_TRUMP", name:"Eric Trump", address:"Palm Beach, FL", notes:"Trump's son; executive/board roles (user-provided).", lat:26.7153, lng:-80.0534 },
      { id:"BILL_PULTE", name:"Bill Pulte", address:"Naples, FL", notes:"Federal Housing Finance Authority Director (user-provided).", lat:26.1420, lng:-81.7948 }
    ],
    links: [
      // NG
      { investor_id:"GHISALLO", company_id:"NG", units:"1,741,510", instrument:"Shares" },
      { investor_id:"BALYASNY", company_id:"NG", units:"585,351", instrument:"Shares" },
      { investor_id:"PAULSON", company_id:"NG", units:"27,238,061", instrument:"Shares" },

      // RDW
      { investor_id:"AEI", company_id:"RDW", units:"85,496,745", instrument:"Shares" },
      { investor_id:"HUDSONBAY", company_id:"RDW", units:"131,252", instrument:"Shares" },
      { investor_id:"HOODRIVER", company_id:"RDW", units:"2,221,219", instrument:"Shares" },
      { investor_id:"PETER_CANNITO", company_id:"RDW", units:"494,573", instrument:"Shares" },

      // QXO
      { investor_id:"HOODRIVER", company_id:"QXO", units:"8,302,495", instrument:"Shares" },
      { investor_id:"GHISALLO", company_id:"QXO", units:"2,000,000", instrument:"Shares" },
      { investor_id:"BALYASNY", company_id:"QXO", units:"5,668,824", instrument:"Shares" },
      { investor_id:"CANTOR", company_id:"QXO", units:"70,928", instrument:"Shares" },
      { investor_id:"AFFINITY", company_id:"QXO", units:"32,671,542", instrument:"Shares" },

      // BKKT
      { investor_id:"ICE", company_id:"BKKT", units:"21,550,595", instrument:"Shares" },
      { investor_id:"CITADEL", company_id:"BKKT", units:"1,319,162", instrument:"Shares" },
      { investor_id:"KELLY_LOEFFLER", company_id:"BKKT", units:"Unknown", instrument:"Shares" },

      // WOLF
      { investor_id:"CANTOR", company_id:"WOLF", units:"32,494", instrument:"Shares" },
      { investor_id:"BALYASNY", company_id:"WOLF", units:"67,270,000", instrument:"Note" },

      // ALTS
      { investor_id:"CITADEL", company_id:"ALTS", units:"73,677", instrument:"Shares" },
      { investor_id:"JANE_STREET", company_id:"ALTS", units:"10,061,351", instrument:"Shares" },
      { investor_id:"ZACH_WITIKOFF", company_id:"ALTS", units:"Unknown", instrument:"Shares" },

      // PSQH
      { investor_id:"DONALD_TRUMP_JR", company_id:"PSQH", units:"697,403", instrument:"Shares" },
      { investor_id:"KELLY_LOEFFLER", company_id:"PSQH", units:"Unknown", instrument:"Shares" },

      // PLTR
      { investor_id:"PETER_THIEL", company_id:"PLTR", units:"70,900,000", instrument:"Shares" },

      // TSLA
      { investor_id:"ELON_MUSK", company_id:"TSLA", units:"412,600,000", instrument:"Shares" },

      // META
      { investor_id:"MARK_ZUCKERBERG", company_id:"META", units:"346,000,000", instrument:"Shares" },

      // ROIV
      { investor_id:"BALYASNY", company_id:"ROIV", units:"969,979", instrument:"Shares" },
      { investor_id:"CANTOR", company_id:"ROIV", units:"350,001", instrument:"Shares" },
      { investor_id:"VIVEK_RAMASWAMY", company_id:"ROIV", units:"37,284,108", instrument:"Shares" },

      // IMVT
      { investor_id:"BALYASNY", company_id:"IMVT", units:"197,569", instrument:"Shares" },
      { investor_id:"ROIV", company_id:"IMVT", units:"96,650,341", instrument:"Shares" },
      { investor_id:"ALPINE_GLOBAL", company_id:"IMVT", units:"2,626,692", instrument:"Shares" },

      // BZFD
      { investor_id:"VIVEK_RAMASWAMY", company_id:"BZFD", units:"3,129,797", instrument:"Shares" },

      // RUM
      { investor_id:"CANTOR", company_id:"RUM", units:"9,333,817", instrument:"Shares" },
      { investor_id:"TETHER", company_id:"RUM", units:"103,333,333", instrument:"Shares" },
      { investor_id:"MYDA_ADVISORS", company_id:"RUM", units:"180,000", instrument:"Calls" },

      // DJT/DWAC
      { investor_id:"JANE_STREET", company_id:"DJT_DWAC", units:"13,822,035", instrument:"Shares" },
      { investor_id:"ALPINE_GLOBAL", company_id:"DJT_DWAC", units:"1,876,604", instrument:"Shares" },
      { investor_id:"CANTOR", company_id:"DJT_DWAC", units:"1,839,039", instrument:"Shares" },
      { investor_id:"HUDSONBAY", company_id:"DJT_DWAC", units:"1,360,808", instrument:"Shares" },
      { investor_id:"ANSON_FUNDS", company_id:"DJT_DWAC", units:"500,001", instrument:"Shares" },
      { investor_id:"BALYASNY", company_id:"DJT_DWAC", units:"244,162", instrument:"Shares" },

      // UMAC
      { investor_id:"DONALD_TRUMP_JR", company_id:"UMAC", units:"331,580", instrument:"Shares" },
      { investor_id:"MYDA_ADVISORS", company_id:"UMAC", units:"80,000", instrument:"Shares" },

      // HOND
      { investor_id:"AROSA_CAPITAL", company_id:"HOND", units:"560,000", instrument:"Shares" },
      { investor_id:"BALYASNY", company_id:"HOND", units:"544,894", instrument:"Shares" },
      { investor_id:"CANTOR", company_id:"HOND", units:"466,287", instrument:"Shares" },
      { investor_id:"MYDA_ADVISORS", company_id:"HOND", units:"300,000", instrument:"Shares" },

      // CEPO/BSTR
      { investor_id:"BALYASNY", company_id:"CEPO_BSTR", units:"220,409", instrument:"Shares" },
      { investor_id:"ALPINE_GLOBAL", company_id:"CEPO_BSTR", units:"173,560", instrument:"Shares" },

      // ABTC
      { investor_id:"ERIC_TRUMP", company_id:"ABTC", units:"90,858,814", instrument:"Shares" },
      { investor_id:"DONALD_TRUMP_JR", company_id:"ABTC", units:"90,858,814", instrument:"Shares" },

      // PHM
      { investor_id:"BALYASNY", company_id:"PHM", units:"807,129", instrument:"Shares" },
      { investor_id:"BILL_PULTE", company_id:"PHM", units:"32,338,034", instrument:"Shares" }
    ],
    landmarks: [
      { id:"MAL", name:"Mar-a-Lago", type:"triangle", lat:26.6773, lng:-80.0395 },
      { id:"WH",  name:"The White House", type:"star", lat:38.8977, lng:-77.0365 }
    ]
  };
  // ----------------------------------------------------------------------

  document.addEventListener('DOMContentLoaded', async () => {
    const errBox = document.getElementById('err');
    const okBox  = document.getElementById('ok');
    function showErr(msg){ errBox.textContent = msg; errBox.style.display='block'; }
    function showOk(msg){ okBox.textContent = msg; okBox.style.display='block'; setTimeout(()=>okBox.style.display='none', 3000); }

    // Base map centered on U.S.
    const map = L.map('map', { worldCopyJump:true }).setView([37.8, -96], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom:19, attribution:'&copy; OpenStreetMap contributors'
    }).addTo(map);

    const companyLayer  = L.layerGroup().addTo(map);
    const investorLayer = L.layerGroup().addTo(map);
    const linkLayer     = L.layerGroup().addTo(map);
    const landmarkLayer = L.layerGroup().addTo(map);
    const markersById   = { company:{}, investor:{} };

    // Pull embedded data (no fetch / no geocoding)
    const companies = DATA.companies || [];
    const investors = DATA.investors || [];
    const links     = DATA.links     || [];
    const landmarks = DATA.landmarks || [];
    let focusedIndex = 0;

    // Build markers
    companyLayer.clearLayers(); investorLayer.clearLayers(); linkLayer.clearLayers(); landmarkLayer.clearLayers();
    markersById.company={}; markersById.investor={};

    companies.forEach(c=>{
      if (c.lat==null || c.lng==null) return;
      const m=L.circleMarker([c.lat,c.lng],{
        radius:7,color:'white',weight:1.5,fillColor:getVar('--blue'),fillOpacity:.9
      }).bindPopup(companyPopup(c));
      m.addTo(companyLayer); markersById.company[c.id]=m;
    });
    investors.forEach(i=>{
      if (i.lat==null || i.lng==null) return;
      const m=L.circleMarker([i.lat,i.lng],{
        radius:6,color:'white',weight:1,fillColor:getVar('--red'),fillOpacity:.9
      }).bindPopup(investorPopup(i));
      m.addTo(investorLayer); markersById.investor[i.id]=m;
    });

    landmarks.forEach(l=>{
      const icon=shapeIcon(l.type, l.type==='triangle'?'#f97316':'#fbbf24');
      L.marker([l.lat,l.lng],{icon}).bindPopup(landmarkPopup(l)).addTo(landmarkLayer);
    });

    // Populate selector
    const sel=document.getElementById('companySelect');
    sel.innerHTML = companies.map((c,i)=>`<option value="${i}">${escapeHTML(c.ticker||c.id)} — ${escapeHTML(c.name||'')}</option>`).join('');
    sel.addEventListener('change', e=>{ focusedIndex=+e.target.value; focusCompany(); });
    document.getElementById('prevBtn').onclick=()=>{ focusedIndex=(focusedIndex-1+companies.length)%companies.length; sel.value=focusedIndex; focusCompany(); };
    document.getElementById('nextBtn').onclick=()=>{ focusedIndex=(focusedIndex+1)%companies.length; sel.value=focusedIndex; focusCompany(); };
    document.getElementById('showAllLinks').addEventListener('change', ()=>focusCompany());

    // Stats box so you can confirm load
    function countWithCoords(arr){ return arr.filter(x=>x.lat!=null && x.lng!=null).length; }
    document.getElementById('stats').innerHTML =
      `<b>Loaded:</b> ${companies.length} companies (${countWithCoords(companies)} pinned), ` +
      `${investors.length} investors (${countWithCoords(investors)} pinned), ${links.length} links.`;

    focusCompany();
